<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="courseMapper">

	<resultMap id="courseResultSet" type="Course">
		<id property="cid" column="course_num"/>
		<result property="catid" column="category_num"/>
		<result property="mid" column="mem_num"/>
		<result property="cTitle" column="course_title"/>
		<result property="cContent" column="course_content"/>
		<result property="cKind" column="course_kind"/>
		<result property="cPrice" column="course_price"/>
		<result property="cMaterial" column="course_material"/>
		<result property="cmp" column="course_material_price"/>	
		<result property="ccn" column="course_current_num"/>	
		<result property="cmn" column="course_max_num" />
		<result property="ced" column="course_enroll_date"/>
		<result property="cad" column="course_approved_date"/>	
		<result property="csd" column="course_start_date"/>	
		<result property="ced" column="course_end_date"/>
		<result property="ca" column="course_approved"/>	
		<result property="cs" column="course_status"/>						
	</resultMap>

	<select id="selectList" resultMap="courseResultSet">
		select *
		from course 
		
	</select>
	
	<select id="courseDetail" parameterType="_int" resultMap="courseResultSet">
		select * 
		from course
		where course_num=#{cid}
	</select>

	<select id="selectCreNum" parameterType="_int" resultType="_int">
		select cre_num 
		from creator
		where mem_num=#{memNum}
	</select>

<!-- 선생님꺼 -->

	<!-- <resultMap id="boardResultSet" type="Board">
		<id property="bId" column="bid"/>
		<result property="bTitle" column="btitle"/>
		<result property="bWriter" column="bwriter"/>
		<result property="bContent" column="bcontent"/>
		<result property="originalFileName" column="original_filename"/>
		<result property="renameFileName" column="rename_filename"/>
		<result property="bcount" column="bcount"/>
		<result property="bCreateDate" column="b_create_date"/>
		<result property="bModifyDate" column="b_modify_date"/>
		<result property="bStatus" column="b_status"/>
	</resultMap>
	
	<resultMap id="replyResultSet" type="Reply">
		<id property="rId" column="rid"/>
		<result property="rContent" column="rcontent"/>		
		<result property="refBid" column="ref_bid"/>
		<result property="rWriter" column="rwriter"/>
		<result property="rCreateDate" column="r_create_date"/>
		<result property="rModifyDate" column="r_modify_date"/>
		<result property="rStatus" column="r_status"/>
	</resultMap>

	<select id="getListCount" resultType="_int">
		select count(*)
		from board
		where b_status='Y'
	</select>
	
	<select id="selectList" resultMap="boardResultSet">
		select *
		from board
		where b_status='Y'
		order by bid desc
	</select>

<select id="selectBoard" parameterType="_int" resultMap="boardResultSet">
		select * 
		from board
		where bid=#{bId}
	</select>
	
<select id="selectTopList" resultMap="boardResultSet">
		
		<![CDATA[    
			select *
			from (select *
			      from board
			      where b_status='Y'
			      order by bcount desc)
			where rownum <= 5 
		]]>
	</select>
	
	<select id="selectReplyList" parameterType="_int" resultMap="replyResultSet">
		select *
		from reply
		where ref_bid=#{bId}
		order by rid desc
	</select>
	
	<insert id="insertReply" parameterType="Reply">
		insert into reply
		values(seq_rid.nextval, #{rContent}, #{refBid}, #{rWriter}, sysdate, sysdate, default)
	</insert>
 -->
	


</mapper>